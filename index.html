<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>WBA Wrapper</title>

<link rel="manifest" href="manifest.json">

<style>
body {
  margin: 0;
  font-family: Arial, sans-serif;
  background: #000;
}

/* Splash */
#splash {
  position: fixed;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  background: #000;
  display: flex;
  justify-content: center;
  align-items: center;
  z-index: 9999;
}

#splashLogo {
  width: 180px;
  opacity: 0;
  transition: opacity 0.6s ease;
}

#app {
  opacity: 0;
  text-align: center;
  padding: 10px;
}

/* Print Header */
@media print {
  #print-header {
    content: url("header_print.png");
    width: 180mm;
    height: 34mm;
    margin-bottom: 8mm;
    display: block;
  }
}
</style>
</head>
<body>

<div id="splash">
  <img id="splashLogo" src="splash.png" alt="Splash">
</div>

<div id="app">
  <img id="print-header" style="display:none;" alt="Print Header">
  <img id="board" src="taktikboard.png" alt="Taktikboard" style="width:100%; max-width:900px;">
</div>

<script>
window.addEventListener("load", () => {
  const splash = document.getElementById("splash");
  const logo = document.getElementById("splashLogo");
  const app = document.getElementById("app");

  window.scrollTo(0, 0);

  const logos = ["splash.png", "logo2.png"];
  let index = 0;

  function next() {
    if (index >= logos.length) {
      splash.style.opacity = "0";
      splash.style.transition = "opacity 0.4s ease";

      setTimeout(() => {
        splash.remove();
        app.style.transition = "opacity 0.4s ease";
        app.style.opacity = "1";
      }, 400);
      return;
    }

    logo.src = logos[index];
    logo.style.opacity = "1";

    setTimeout(() => {
      logo.style.opacity = "0";
      index++;
      setTimeout(next, 600);
    }, 900);
  }

  next();
});

window.onpageshow = () => window.scrollTo(0, 0);

// Register Service Worker
if ("serviceWorker" in navigator) {
  navigator.serviceWorker.register("sw.js");
}

// Direct blank PDF download (SSOT v6)
document.getElementById("pdfBlanko").onclick = function(){
  document.getElementById("pdfModal").classList.remove("open");
  const link = document.createElement("a");
  link.href = "blank_form.pdf";
  link.download = "FFF-WBA-Blanko.pdf";
  document.body.appendChild(link);
  link.click();
  document.body.removeChild(link);
};

</script>

</body>
</html>
